<div class="container-fluid">
  <!-- <div>
    <h1>{{ title }}</h1>
    <button class="btn btn-success" routerLink="/">To Home</button>
    <button class="btn" (click)="findPlaces()">Find places</button>
    Lat: {{ lat }} Lng: {{ lng }} radius: {{ radius }}
    <br>
  </div>
  <div class="server-available">
    <div *ngIf="isAvailable(); else elseBlock">
      <svg xmlns="http://www.w3.org/2000/svg">
        <circle cx="10" cy="10" r="10" fill="lime" />
      </svg>
    </div>
    <ng-template #elseBlock>
      <svg xmlns="http://www.w3.org/2000/svg">
        <circle cx="10" cy="10" r="10" fill="red" />
      </svg>
    </ng-template>
  </div> -->
  <div id="background" class="row">
    <div class="col-md-8">
      <div id="map">
        <div *ngIf="showDetails" class="parent-container">
          <app-place-details (showDetails)="handleShowDetails()" [detailsData]="detailsData"></app-place-details>
        </div>
        <div class="loader" [hidden]="loading != true"></div>
        <div class="dimm" [hidden]="loading != true"></div>
        <agm-map [latitude]="lat" [longitude]="lng" [zoom]="zoom" [disableDoubleClickZoom]=true [styles]="mapStyle">
          <agm-marker [(latitude)]="lat" [(longitude)]="lng" [(label)]="label" [markerDraggable]=true (dragEnd)="updateMapCenter($event)">
            <agm-snazzy-info-window [maxWidth]=340 [isOpen]="true" [closeWhenOthersOpen]="true">
              <ng-template class="infoTemplate">
                Are you here?
                <small><br>Drag pin to your location,
                <br> then click ;)</small>
                <button class="btn btn-info btn-block search-button" (click)="findPlaces()">Find places</button>
              </ng-template>
            </agm-snazzy-info-window>
          </agm-marker>
          <agm-circle [(latitude)]="lat" [(longitude)]="lng" [(radius)]="radius" [fillColor]="'lime'" [editable]="true" [fillOpacity]="0.3">
          </agm-circle>
          <div *ngFor="let place of places; let i= index">
            <agm-marker [latitude]="place.location.lat" [longitude]="place.location.lng" label={{i+1}} (mouseOver)="infoEnter($event, infoWindow)"
              (mouseOut)="infoOut($event, infoWindow)" [markerClickable]=true  (markerClick)="showPlaceDetails(i)">
              <agm-info-window #infoWindow>
                {{getInfo(i)}}
              </agm-info-window>
              <!-- <agm-snazzy-info-window #infoWindow [maxWidth]=300 [closeWhenOthersOpen]=true>
                <ng-template>
                  {{getInfo(i)}}
                  <br>
                  <button class="btn" (click)="getAdditionalInfo(i)">Additional Info</button>
                </ng-template>
              </agm-snazzy-info-window> -->
            </agm-marker>
          </div>
        </agm-map>
      </div>

    </div>
    <div id="placeList" class="col-md-4 place-list">
      <br>
      <div id="placeItem" *ngFor="let placeDetail of places; let i= index" class="list-group">
        <!-- <app-place-detail-card [placeIndex]="i + 1" [placeName]="placeDetail.name"></app-place-detail-card> -->
        <div class="list-group-item list-group-item-action" (click)="showPlaceDetails(i)" id="placeDetail.id" role="tab" aria-controls="i">
          {{ i+1 }}.
          <strong>{{ placeDetail.name }}</strong>
          <div class="place-list-item">
            <small>show details</small>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
